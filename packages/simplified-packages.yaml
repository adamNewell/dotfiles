# Simplified Package Management Configuration
# Reduced to 3 package managers: mise, OS package manager, chezmoi external

# Language versions managed by mise
language_versions:
  nodejs: "22.11.0"
  python: "3.12.0" 
  golang: "1.21.0"

# Essential CLI tools - try mise first, fallback to OS package manager
essential_tools:
  # File utilities
  - name: "eza"
    description: "Modern ls replacement with colors and icons"
    mise: "eza"
    macos_brew: "eza"
    linux_apt: "eza"
    linux_dnf: "eza"
    linux_pacman: "eza"

  - name: "fd"
    description: "Modern find replacement"
    mise: "fd"
    macos_brew: "fd"
    linux_apt: "fd-find"
    linux_dnf: "fd-find"
    linux_pacman: "fd"

  - name: "ripgrep"
    description: "Fast grep replacement"
    mise: "ripgrep"
    macos_brew: "ripgrep"
    linux_apt: "ripgrep"
    linux_dnf: "ripgrep"
    linux_pacman: "ripgrep"

  - name: "bat"
    description: "Cat with syntax highlighting"
    mise: "bat"
    macos_brew: "bat"
    linux_apt: "bat"
    linux_dnf: "bat"
    linux_pacman: "bat"

  - name: "zoxide"
    description: "Smart cd replacement with frecency"
    mise: "zoxide"
    macos_brew: "zoxide"
    linux_apt: "zoxide"
    linux_dnf: "zoxide"
    linux_pacman: "zoxide"

  - name: "fzf"
    description: "Fuzzy finder for command line"
    mise: "fzf"
    macos_brew: "fzf"
    linux_apt: "fzf"
    linux_dnf: "fzf"
    linux_pacman: "fzf"

  - name: "jq"
    description: "JSON processor"
    mise: "jq"
    macos_brew: "jq"
    linux_apt: "jq"
    linux_dnf: "jq"
    linux_pacman: "jq"

  - name: "delta"
    description: "Better git diff viewer"
    mise: "delta"
    macos_brew: "git-delta"
    linux_apt: "git-delta"
    linux_dnf: "git-delta"

  - name: "sheldon"
    description: "Fast zsh plugin manager"
    mise: "sheldon"
    macos_brew: "sheldon"
    # Linux: via external download

# Platform-specific system packages (only essential ones)
system_packages:
  # macOS via Homebrew
  macos:
    essential:
      - curl
      - wget
      - git
      - tree
      - tmux
      - neovim
      - openssh
      - python3
      - node
      - go

    development:
      - docker
      - gh
      - git-lfs

    shell:
      - zsh
      - zsh-completions
      - oh-my-posh

  # Linux distributions
  linux:
    debian_essential:
      - build-essential
      - curl
      - wget
      - git
      - zsh
      - tmux
      - neovim
      - tree
      - unzip
      - python3
      - python3-pip

    fedora_essential:
      - "@development-tools"
      - curl
      - wget
      - git
      - zsh
      - tmux
      - neovim
      - tree
      - unzip
      - python3
      - python3-pip

    arch_essential:
      - base-devel
      - curl
      - wget
      - git
      - zsh
      - tmux
      - neovim
      - tree
      - unzip
      - python

# Installation priority (first available wins)
package_manager_priority:
  1: "mise"        # For languages and compatible tools
  2: "os_native"   # brew/apt/dnf/pacman
  3: "external"    # chezmoi external downloads

# Tools that MUST use external downloads (not available in package managers)
external_only:
  - age           # Encryption tool
  - shellcheck    # Shell script linter (Linux only)

# Optional tools (install if user wants them)
optional_tools:
  development:
    - name: "lazygit"
      description: "Terminal UI for git"
      macos_brew: "lazygit"
      linux_apt: "lazygit"

  productivity:
    - name: "tldr"
      description: "Simplified man pages"
      mise: "tealdeer"
      macos_brew: "tlrc"
      linux_apt: "tldr"

# Version constraints
version_requirements:
  nodejs: ">=18.0.0"
  python: ">=3.10.0"
  git: ">=2.30.0"
  zsh: ">=5.8.0"

# Installation categories for staged deployment
install_stages:
  stage1_critical:
    - git
    - zsh
    - curl
    - wget

  stage2_languages:
    - nodejs
    - python
    - golang

  stage3_tools:
    - eza
    - fd
    - ripgrep
    - bat
    - zoxide
    - fzf
    - jq

  stage4_development:
    - tmux
    - neovim
    - delta
    - docker

  stage5_optional:
    - lazygit
    - tldr